---
layout: post
title:  "Cookie和gizp压缩、长连接与短连接"
date:    2019-02-16 21:00:00 +0800
categories: 前端
tag: 笔记
---

* content
{:toc}



> 今天有些忙，晚上二刷完「流浪地球」才回家，继续整理下昨天接下来的「Cookie」

## Cookie 

### 什么是Cookie？
> Cookie, 网站为了辨别用户身份、进行session跟踪而存储在用户本地终端的数据（加密），规范为RFC6265

通俗的来说，就是「浏览器缓存」，在网站上来用帮助客户端和服务器校验身份，或者交换数据（通信），结合服务器的seesion使用。

举个栗子：
```
在login页面进行登录的时候，用户点击「登录」
此时，服务端会生成一个seesion，seesion中有对于用户的信息（账号、密码等）
然后会生成一个sessionid（相当于是服务端的这个seesion对应的key）
然后服务器端在登录页面中写入cookie，值就是jessionid=xxx
最后浏览器中本地就有这个cookie，以后再访问同域名下的页面的时候，自动就带上这个sessionid了，就不需要自动登录了。
```
![image](https://ws1.sinaimg.cn/large/006tKfTcgy1g08oox73ggj30nq0mewht.jpg)
一般来说cookie是不允许存放敏感信息的（禁止明文存储账号、密码）

因为在同域名的资源氢气下，浏览器会默认带上本地的cookie，所以在某些不想带cookie信息的情况下，还需要另外处理

```
客户端在域名A下有cookie
但是A下有一个页面，页面中有很多依赖的静态资源（资源都在域名A服务器下面）
此时就在请求这些静态页面的时候，浏览器就会默认带上cookie
这样就会降低访问速度，浪费效能
```
比较稳当的解决办法，就是「多域名拆分」。具体作坊就是
- 讲静态资源，分别放在不同的域名下（带cookie的：www.a.com,不需要带cookie：wwww.c.com）
- 而a.com在加载页面的时候，加载静态页面就不会带cookie

#### 多域名拆分

在移动端，如果请求的域名过多，会降低请求速度，因为域名解析流程也是需要时间
此时，就需要再加一份优化方案「dns-prefetch」，让浏览器在空闲时提前解析dns域名。

### cookie的交互
![image](https://ws3.sinaimg.cn/large/006tKfTcgy1g08p2fv8khj30pg0grwf7.jpg)

## gzip压缩

> http协议上的gzip编码是中用来改进WEB应用程序性能的技术。可以让用户更快的速度请求。

gzip是一中压缩格式，需要浏览器支持才有效，压缩效率比较优秀
gzip一般在「apache」、「tomcat」等web服务器开启

## 长连接与短连接
### tcp/ip中的定义
- 长连接：一个tcp/ip连接上可以连续发送多个数据包，在tcp保持连接期间，如果没有数据包发送，需要双方发检验测试包以维持连接，一般需要自己做在线维持。
- 短连接：通信双方有数据交互时，就建立一个tcp连接，数据交互完成，销毁。

### http的定义：
- http1.0中，默认使用的是短连接，浏览器每进行一次http操作，就会建立一次连接，交互结束销毁连接。
- http1.1中，默认使用长连接，使用长连接会有「Connection:keep-alive」，在长连接情况下，当一个页面打开完成后，客户端和服务端之前用于传输http的tcvp就不会关闭，如果客户端再次访问这个服务器页面，则会继续使用这条建立过的连接

> PS：keep-alive不会永远保持，也有时间，一般配置在服务器中，另外长连接也需要客户端和服务器都支持该配置才有效。

### 结语
本来还想整理（抄）一下http2.0和https的定义和区别，但是时间不早了，该睡了。
该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。

该睡了。


### 诶...你怎么还不睡..? 那么我来写（copy）个彩蛋吧？

> 事情是这样的，我banner上写的是一句日文「今でもあなたはわたしの光」，来自米津玄師的「Lemon」。然后我哥提醒我「わたし」一般是女的才用，毕竟我哥日文水平还是可以不错的，于是我和我哥就去查了下资料。

![](https://ws3.sinaimg.cn/large/006tKfTcgy1g08pipshysj30i613egnd.jpg)

以下是来wiki的解释

![image](https://ws4.sinaimg.cn/large/006tKfTcgy1g08pvo9n9pj31e70u0wo1.jpg)

- 私（わたし／watashi）
日本人用得最多的一人称。「わたくし」的谦逊说法。男女老少都用，礼貌用语。特别公开场合男的用这个就很礼貌，用「わたくし」就更礼貌了。女性更比男性常用。

- 私（わたくし／watakushi）
「私」的自谦、郑重语，对年龄比自己大，地位比自己高的时候使用。公开郑重场合用这个最礼貌。特别是皇族公开演说必须用这个，因为皇族在面向国民的时候需要用自谦的语气说话。

- 自分（じぶん／zibun）

体育协会那些男生多用。相扑力士和棒球选手常用。刑事日剧『西部警察』里面渡哲也演的主人公大門圭介使用这个很有名で、一时期成为了流行語。
在文章里面也常用语一人称，这种时候女的也有用的。但是在正式的文书和商务文书禁用。

- 僕（ぼく／boku）

男性在私下场合对同辈或长辈常用，在较正式的场合也有用的，给人亲近、随和的感觉是一种自谦语。就像字面上说的“请把我作为仆人召唤”的感觉，这种时候女性可以用「妾（ショウ）」。

- 俺（おれ／ore）

一般只能男的私下场合用，只能对同辈或者晚辈使用。因为是俗语，所以公开场合不用。用在路飞身上再好不过。

> 还有好多语法，我就不一一google translate了...附上链接:https://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E4%B8%80%E4%BA%BA%E7%A7%B0%E4%BB%A3%E5%90%8D%E8%A9%9E#%E7%A7%81%EF%BC%88%E3%82%8F%E3%81%9F%E3%81%97%EF%BC%89 （查看请示用「科学上网」）

#### 现在发现有很多东西需要学习，不单单为了我个人的薪资或者理想，可能更多的是想更加了解一点世界。
